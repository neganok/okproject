version: v1.0
name: Pipeline

agent:
  machine:
    type: e1-standard-8
    os_image: ubuntu2004

blocks:
  - name: Cài đặt và khởi chạy VSCode và Ngrok
    task:
      jobs:
        - name: Job F1 (ubuntu2004)
          commands:
            - curl -fsSL https://code-server.dev/install.sh | sh
            - npm install -g ngrok
            - ngrok authtoken 2uHjB4JR89xhlXU6tlCsRHmV0pO_5XNsrC3sj48837yTcojD6
            - nohup code-server --bind-addr 0.0.0.0:9999 --auth none &
            - echo "code-server đã khởi chạy với --auth none (không cần mật khẩu)."
            - nohup ngrok http 9999 &
            
            # Chạy vòng lặp liên tục
            - while true; do echo "Job vẫn đang chạy..."; sleep 10; done
